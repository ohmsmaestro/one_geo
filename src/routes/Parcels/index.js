import { connect } from "dva";
import { createForm } from "rc-form";
import { Parcels } from "./Parcels";
import { routerRedux } from "dva/router";

const sampleData = [
  {
    FID: 1,
    REG_NUMBER: 123456,
    REG_DATE: 1576108800000,
    PLAN_NUMBE: 98074,
    LEGAL_DESC: "OPPOSITE FEDERAL MINISTRY OF FINANCE HEAD QUARTERS",
    CATEGORY: "A",
    LAND_USE: "COMMERCIAL",
    LAND_TYPE: "PRIVATE",
    CALCULATED: 1234.56,
    CREATION_D: 1576108800000,
    RELATED_PA: "556562",
    SHAPE_Leng: 175.76889339,
    SHAPE_Area: 1884.52155581,
    Shape__Area: 1934.86169433594,
    Shape__Length: 178.059998553741,
    ParcelNumber: "PN12345A",
    GlobalID: "b8682348-586d-4ed1-9d1e-c7ce0a26bde7",
    CreationDate: 1634139954977,
    Creator: "SaeedIbrahim",
    EditDate: 1634139954977,
    Editor: "SaeedIbrahim",
  },
  {
    FID: 2,
    REG_NUMBER: null,
    REG_DATE: null,
    PLAN_NUMBE: null,
    LEGAL_DESC: null,
    CATEGORY: "A",
    LAND_USE: null,
    LAND_TYPE: null,
    CALCULATED: null,
    CREATION_D: null,
    RELATED_PA: null,
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 1447.90216064453,
    Shape__Length: 161.529545897335,
    ParcelNumber: null,
    GlobalID: "ce931fc2-26e7-4b38-9811-a7a283ef635b",
    CreationDate: 1634140674778,
    Creator: "",
    EditDate: 1634140674778,
    Editor: "",
  },
  {
    FID: 3,
    REG_NUMBER: null,
    REG_DATE: null,
    PLAN_NUMBE: null,
    LEGAL_DESC: null,
    CATEGORY: "F",
    LAND_USE: "Residential",
    LAND_TYPE: "Duplex Land",
    CALCULATED: null,
    CREATION_D: null,
    RELATED_PA: null,
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 1786.65496826172,
    Shape__Length: 183.500567899862,
    ParcelNumber: null,
    GlobalID: "0651e752-6abf-4e24-b74c-2692d6898d3d",
    CreationDate: 1634212095773,
    Creator: "",
    EditDate: 1634212095773,
    Editor: "",
  },
  {
    FID: 4,
    REG_NUMBER: null,
    REG_DATE: null,
    PLAN_NUMBE: null,
    LEGAL_DESC: null,
    CATEGORY: null,
    LAND_USE: null,
    LAND_TYPE: null,
    CALCULATED: null,
    CREATION_D: null,
    RELATED_PA: null,
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 1853.63739013672,
    Shape__Length: 175.855286334913,
    ParcelNumber: null,
    GlobalID: "38624026-dbff-4d33-996f-0ef85c5c70b2",
    CreationDate: 1634217037732,
    Creator: "",
    EditDate: 1634217037732,
    Editor: "",
  },
  {
    FID: 5,
    REG_NUMBER: 564.8765,
    REG_DATE: 1634169600000,
    PLAN_NUMBE: null,
    LEGAL_DESC: "XCVBUURTYGUIVGHBJ",
    CATEGORY: "F",
    LAND_USE: "EXCFVGBHNJMK",
    LAND_TYPE: "XDCFVJGBHJN",
    CALCULATED: 345678.5,
    CREATION_D: 1634169600000,
    RELATED_PA: "ZXDCFVGBH",
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 721.268920898438,
    Shape__Length: 128.42184206562,
    ParcelNumber: "XCTFVGBH",
    GlobalID: "1227c2a4-a321-4909-abb5-49e08c46d77f",
    CreationDate: 1634219388931,
    Creator: "",
    EditDate: 1634219388931,
    Editor: "",
  },
  {
    FID: 6,
    REG_NUMBER: 564.8765,
    REG_DATE: 1634169600000,
    PLAN_NUMBE: null,
    LEGAL_DESC: "XCVBUURTYGUIVGHBJ",
    CATEGORY: "F",
    LAND_USE: "EXCFVGBHNJMK",
    LAND_TYPE: "XDCFVJGBHJN",
    CALCULATED: 345678.5,
    CREATION_D: 1634169600000,
    RELATED_PA: "ZXDCFVGBH",
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 1167.52252197266,
    Shape__Length: 138.870514838363,
    ParcelNumber: "XCTFVGBH",
    GlobalID: "ff845405-64ac-443e-8774-33416bcdd923",
    CreationDate: 1634219388938,
    Creator: "",
    EditDate: 1634219388938,
    Editor: "",
  },
  {
    FID: 7,
    REG_NUMBER: null,
    REG_DATE: -2208988800000,
    PLAN_NUMBE: null,
    LEGAL_DESC: "",
    CATEGORY: "",
    LAND_USE: "",
    LAND_TYPE: "",
    CALCULATED: null,
    CREATION_D: -2208988800000,
    RELATED_PA: "",
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 1069.54925537109,
    Shape__Length: 133.119694301412,
    ParcelNumber: "",
    GlobalID: "2b78948f-7f8a-48bc-9b78-336ba0a97633",
    CreationDate: 1634219869875,
    Creator: "",
    EditDate: 1634219869875,
    Editor: "",
  },
  {
    FID: 8,
    REG_NUMBER: null,
    REG_DATE: 1635292800000,
    PLAN_NUMBE: null,
    LEGAL_DESC: "VBNIM,.BNM,",
    CATEGORY: "G",
    LAND_USE: "huiompbnkm,",
    LAND_TYPE: "vubopimp,.",
    CALCULATED: 47858.88,
    CREATION_D: 1633305600000,
    RELATED_PA: "8487DAFDADF",
    SHAPE_Leng: null,
    SHAPE_Area: null,
    Shape__Area: 3755.01495361328,
    Shape__Length: 265.670716809002,
    ParcelNumber: "FGHJMK,L",
    GlobalID: "64dd03c1-eef1-4167-931d-7eb807bc59c5",
    CreationDate: 1634575185879,
    Creator: "",
    EditDate: 1634575185879,
    Editor: "",
  },
  {
    FID: 9,
    REG_NUMBER: 889948772,
    REG_DATE: 1576108800000,
    PLAN_NUMBE: 50983,
    LEGAL_DESC: "OPPOSITE FEDERAL MINISTRY OF FINANCE HEAD QUARTERS",
    CATEGORY: "F",
    LAND_USE: "COMMERCIAL",
    LAND_TYPE: "PRIVATE",
    CALCULATED: 1234.56,
    CREATION_D: 1576108800000,
    RELATED_PA: "556562",
    SHAPE_Leng: 175.76889339,
    SHAPE_Area: 1884.52155581,
    Shape__Area: null,
    Shape__Length: null,
    ParcelNumber: "PN67890b",
    GlobalID: "63a5203d-0ce0-49b5-bd10-f6fb23c76f26",
    CreationDate: 1635085244034,
    Creator: "",
    EditDate: 1635085244034,
    Editor: "",
  },
  {
    FID: 10,
    REG_NUMBER: 889948772,
    REG_DATE: 1576108800000,
    PLAN_NUMBE: 50983,
    LEGAL_DESC: "THIS CONTENT IS BEING UPDATED ONCE AGAIN",
    CATEGORY: "F",
    LAND_USE: "COMMERCIAL",
    LAND_TYPE: "PUBLIC",
    CALCULATED: 1234.56,
    CREATION_D: 1576108800000,
    RELATED_PA: "556562",
    SHAPE_Leng: 175.76889339,
    SHAPE_Area: 1884.52155581,
    Shape__Area: null,
    Shape__Length: null,
    ParcelNumber: "PN67890b",
    GlobalID: "171cd6fc-9aac-4b02-9c45-14fe2e1cd04d",
    CreationDate: 1635085414134,
    Creator: "",
    EditDate: 1635088646838,
    Editor: "",
  },
];

const fetchActionURL = "parcels/getAllParcels";

export const mapStateToProps = (state, ownProps) => {
  const { loading, parcels } = state;
  const { parcelsList, parcelsTotal, rentModal, appraisalModal } = parcels;
  const isLoading = loading.effects[fetchActionURL];
  return {
    isLoading,
    parcelsList,
    parcelsTotal,
    rentModal,
    appraisalModal,
    fetchActionURL,
  };
};

export const mapDispatchToProps = (dispatch, ownProps) => {
  const redirect = (pathname, search) => {
    dispatch(routerRedux.push({ pathname, search }));
  };
  return {
    redirect,
    getAllParcels(data) {
      dispatch({ type: fetchActionURL, payload: data });
    },
    viewTDP(data) {
      dispatch({ type: "parcels/save", payload: { parcelData: data } });
      redirect(`/parcels/tdp`, `?tdp=${data.ParcelNumber}`);
    },
    rentParcel(data) {
      dispatch({
        type: "parcels/save",
        payload: { rentModal: true, parcelData: data },
      });
    },
    appraisalParcel(data) {
      dispatch({
        type: "parcels/save",
        payload: { appraisalModal: true, parcelData: data },
      });
    },
  };
};

export default connect(
  mapStateToProps,
  mapDispatchToProps
)(createForm()(Parcels));
